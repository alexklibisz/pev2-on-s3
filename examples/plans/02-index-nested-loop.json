{
  "title": "Customer order history with product details",
  "query": "-- Customer order history with product details\nSELECT\n  c.name AS customer_name,\n  o.id AS order_id,\n  o.created_at AS order_date,\n  p.name AS product_name,\n  oi.quantity,\n  oi.unit_price\nFROM customers c\nJOIN orders o ON o.customer_id = c.id\nJOIN order_items oi ON oi.order_id = o.id\nJOIN products p ON p.id = oi.product_id\nWHERE c.id = 42\nORDER BY o.created_at DESC;",
  "plan": "[\n  {\n    \"Plan\": {\n      \"Node Type\": \"Sort\",\n      \"Parallel Aware\": false,\n      \"Async Capable\": false,\n      \"Startup Cost\": 113.77,\n      \"Total Cost\": 113.80,\n      \"Plan Rows\": 15,\n      \"Plan Width\": 46,\n      \"Actual Startup Time\": 0.367,\n      \"Actual Total Time\": 0.369,\n      \"Actual Rows\": 15,\n      \"Actual Loops\": 1,\n      \"Sort Key\": [\"o.created_at DESC\"],\n      \"Sort Method\": \"quicksort\",\n      \"Sort Space Used\": 25,\n      \"Sort Space Type\": \"Memory\",\n      \"Shared Hit Blocks\": 65,\n      \"Shared Read Blocks\": 23,\n      \"Shared Dirtied Blocks\": 0,\n      \"Shared Written Blocks\": 0,\n      \"Local Hit Blocks\": 0,\n      \"Local Read Blocks\": 0,\n      \"Local Dirtied Blocks\": 0,\n      \"Local Written Blocks\": 0,\n      \"Temp Read Blocks\": 0,\n      \"Temp Written Blocks\": 0,\n      \"Plans\": [\n        {\n          \"Node Type\": \"Nested Loop\",\n          \"Parent Relationship\": \"Outer\",\n          \"Parallel Aware\": false,\n          \"Async Capable\": false,\n          \"Join Type\": \"Inner\",\n          \"Startup Cost\": 5.31,\n          \"Total Cost\": 113.47,\n          \"Plan Rows\": 15,\n          \"Plan Width\": 46,\n          \"Actual Startup Time\": 0.107,\n          \"Actual Total Time\": 0.324,\n          \"Actual Rows\": 15,\n          \"Actual Loops\": 1,\n          \"Inner Unique\": true,\n          \"Shared Hit Blocks\": 62,\n          \"Shared Read Blocks\": 23,\n          \"Shared Dirtied Blocks\": 0,\n          \"Shared Written Blocks\": 0,\n          \"Local Hit Blocks\": 0,\n          \"Local Read Blocks\": 0,\n          \"Local Dirtied Blocks\": 0,\n          \"Local Written Blocks\": 0,\n          \"Temp Read Blocks\": 0,\n          \"Temp Written Blocks\": 0,\n          \"Plans\": [\n            {\n              \"Node Type\": \"Nested Loop\",\n              \"Parent Relationship\": \"Outer\",\n              \"Parallel Aware\": false,\n              \"Async Capable\": false,\n              \"Join Type\": \"Inner\",\n              \"Startup Cost\": 5.03,\n              \"Total Cost\": 109.12,\n              \"Plan Rows\": 15,\n              \"Plan Width\": 39,\n              \"Actual Startup Time\": 0.098,\n              \"Actual Total Time\": 0.287,\n              \"Actual Rows\": 15,\n              \"Actual Loops\": 1,\n              \"Inner Unique\": false,\n              \"Shared Hit Blocks\": 17,\n              \"Shared Read Blocks\": 23,\n              \"Shared Dirtied Blocks\": 0,\n              \"Shared Written Blocks\": 0,\n              \"Local Hit Blocks\": 0,\n              \"Local Read Blocks\": 0,\n              \"Local Dirtied Blocks\": 0,\n              \"Local Written Blocks\": 0,\n              \"Temp Read Blocks\": 0,\n              \"Temp Written Blocks\": 0,\n              \"Plans\": [\n                {\n                  \"Node Type\": \"Nested Loop\",\n                  \"Parent Relationship\": \"Outer\",\n                  \"Parallel Aware\": false,\n                  \"Async Capable\": false,\n                  \"Join Type\": \"Inner\",\n                  \"Startup Cost\": 4.61,\n                  \"Total Cost\": 31.06,\n                  \"Plan Rows\": 5,\n                  \"Plan Width\": 25,\n                  \"Actual Startup Time\": 0.081,\n                  \"Actual Total Time\": 0.111,\n                  \"Actual Rows\": 5,\n                  \"Actual Loops\": 1,\n                  \"Inner Unique\": false,\n                  \"Shared Hit Blocks\": 5,\n                  \"Shared Read Blocks\": 5,\n                  \"Shared Dirtied Blocks\": 0,\n                  \"Shared Written Blocks\": 0,\n                  \"Local Hit Blocks\": 0,\n                  \"Local Read Blocks\": 0,\n                  \"Local Dirtied Blocks\": 0,\n                  \"Local Written Blocks\": 0,\n                  \"Temp Read Blocks\": 0,\n                  \"Temp Written Blocks\": 0,\n                  \"Plans\": [\n                    {\n                      \"Node Type\": \"Index Scan\",\n                      \"Parent Relationship\": \"Outer\",\n                      \"Parallel Aware\": false,\n                      \"Async Capable\": false,\n                      \"Scan Direction\": \"Forward\",\n                      \"Index Name\": \"customers_pkey\",\n                      \"Relation Name\": \"customers\",\n                      \"Alias\": \"c\",\n                      \"Startup Cost\": 0.29,\n                      \"Total Cost\": 8.30,\n                      \"Plan Rows\": 1,\n                      \"Plan Width\": 17,\n                      \"Actual Startup Time\": 0.040,\n                      \"Actual Total Time\": 0.041,\n                      \"Actual Rows\": 1,\n                      \"Actual Loops\": 1,\n                      \"Index Cond\": \"(id = 42)\",\n                      \"Rows Removed by Index Recheck\": 0,\n                      \"Shared Hit Blocks\": 0,\n                      \"Shared Read Blocks\": 3,\n                      \"Shared Dirtied Blocks\": 0,\n                      \"Shared Written Blocks\": 0,\n                      \"Local Hit Blocks\": 0,\n                      \"Local Read Blocks\": 0,\n                      \"Local Dirtied Blocks\": 0,\n                      \"Local Written Blocks\": 0,\n                      \"Temp Read Blocks\": 0,\n                      \"Temp Written Blocks\": 0\n                    },\n                    {\n                      \"Node Type\": \"Bitmap Heap Scan\",\n                      \"Parent Relationship\": \"Inner\",\n                      \"Parallel Aware\": false,\n                      \"Async Capable\": false,\n                      \"Relation Name\": \"orders\",\n                      \"Alias\": \"o\",\n                      \"Startup Cost\": 4.33,\n                      \"Total Cost\": 22.71,\n                      \"Plan Rows\": 5,\n                      \"Plan Width\": 16,\n                      \"Actual Startup Time\": 0.036,\n                      \"Actual Total Time\": 0.064,\n                      \"Actual Rows\": 5,\n                      \"Actual Loops\": 1,\n                      \"Recheck Cond\": \"(customer_id = 42)\",\n                      \"Rows Removed by Index Recheck\": 0,\n                      \"Exact Heap Blocks\": 5,\n                      \"Lossy Heap Blocks\": 0,\n                      \"Shared Hit Blocks\": 5,\n                      \"Shared Read Blocks\": 2,\n                      \"Shared Dirtied Blocks\": 0,\n                      \"Shared Written Blocks\": 0,\n                      \"Local Hit Blocks\": 0,\n                      \"Local Read Blocks\": 0,\n                      \"Local Dirtied Blocks\": 0,\n                      \"Local Written Blocks\": 0,\n                      \"Temp Read Blocks\": 0,\n                      \"Temp Written Blocks\": 0,\n                      \"Plans\": [\n                        {\n                          \"Node Type\": \"Bitmap Index Scan\",\n                          \"Parent Relationship\": \"Outer\",\n                          \"Parallel Aware\": false,\n                          \"Async Capable\": false,\n                          \"Index Name\": \"idx_orders_customer_id\",\n                          \"Startup Cost\": 0.00,\n                          \"Total Cost\": 4.33,\n                          \"Plan Rows\": 5,\n                          \"Plan Width\": 0,\n                          \"Actual Startup Time\": 0.030,\n                          \"Actual Total Time\": 0.030,\n                          \"Actual Rows\": 5,\n                          \"Actual Loops\": 1,\n                          \"Index Cond\": \"(customer_id = 42)\",\n                          \"Shared Hit Blocks\": 0,\n                          \"Shared Read Blocks\": 2,\n                          \"Shared Dirtied Blocks\": 0,\n                          \"Shared Written Blocks\": 0,\n                          \"Local Hit Blocks\": 0,\n                          \"Local Read Blocks\": 0,\n                          \"Local Dirtied Blocks\": 0,\n                          \"Local Written Blocks\": 0,\n                          \"Temp Read Blocks\": 0,\n                          \"Temp Written Blocks\": 0\n                        }\n                      ]\n                    }\n                  ]\n                },\n                {\n                  \"Node Type\": \"Index Scan\",\n                  \"Parent Relationship\": \"Inner\",\n                  \"Parallel Aware\": false,\n                  \"Async Capable\": false,\n                  \"Scan Direction\": \"Forward\",\n                  \"Index Name\": \"idx_order_items_order_id\",\n                  \"Relation Name\": \"order_items\",\n                  \"Alias\": \"oi\",\n                  \"Startup Cost\": 0.42,\n                  \"Total Cost\": 15.58,\n                  \"Plan Rows\": 3,\n                  \"Plan Width\": 18,\n                  \"Actual Startup Time\": 0.017,\n                  \"Actual Total Time\": 0.034,\n                  \"Actual Rows\": 3,\n                  \"Actual Loops\": 5,\n                  \"Index Cond\": \"(order_id = o.id)\",\n                  \"Rows Removed by Index Recheck\": 0,\n                  \"Shared Hit Blocks\": 12,\n                  \"Shared Read Blocks\": 18,\n                  \"Shared Dirtied Blocks\": 0,\n                  \"Shared Written Blocks\": 0,\n                  \"Local Hit Blocks\": 0,\n                  \"Local Read Blocks\": 0,\n                  \"Local Dirtied Blocks\": 0,\n                  \"Local Written Blocks\": 0,\n                  \"Temp Read Blocks\": 0,\n                  \"Temp Written Blocks\": 0\n                }\n              ]\n            },\n            {\n              \"Node Type\": \"Index Scan\",\n              \"Parent Relationship\": \"Inner\",\n              \"Parallel Aware\": false,\n              \"Async Capable\": false,\n              \"Scan Direction\": \"Forward\",\n              \"Index Name\": \"products_pkey\",\n              \"Relation Name\": \"products\",\n              \"Alias\": \"p\",\n              \"Startup Cost\": 0.27,\n              \"Total Cost\": 0.29,\n              \"Plan Rows\": 1,\n              \"Plan Width\": 15,\n              \"Actual Startup Time\": 0.002,\n              \"Actual Total Time\": 0.002,\n              \"Actual Rows\": 1,\n              \"Actual Loops\": 15,\n              \"Index Cond\": \"(id = oi.product_id)\",\n              \"Rows Removed by Index Recheck\": 0,\n              \"Shared Hit Blocks\": 45,\n              \"Shared Read Blocks\": 0,\n              \"Shared Dirtied Blocks\": 0,\n              \"Shared Written Blocks\": 0,\n              \"Local Hit Blocks\": 0,\n              \"Local Read Blocks\": 0,\n              \"Local Dirtied Blocks\": 0,\n              \"Local Written Blocks\": 0,\n              \"Temp Read Blocks\": 0,\n              \"Temp Written Blocks\": 0\n            }\n          ]\n        }\n      ]\n    },\n    \"Planning\": {\n      \"Shared Hit Blocks\": 350,\n      \"Shared Read Blocks\": 31,\n      \"Shared Dirtied Blocks\": 2,\n      \"Shared Written Blocks\": 0,\n      \"Local Hit Blocks\": 0,\n      \"Local Read Blocks\": 0,\n      \"Local Dirtied Blocks\": 0,\n      \"Local Written Blocks\": 0,\n      \"Temp Read Blocks\": 0,\n      \"Temp Written Blocks\": 0\n    },\n    \"Planning Time\": 3.787,\n    \"Triggers\": [\n    ],\n    \"Execution Time\": 0.550\n  }\n]"
}
